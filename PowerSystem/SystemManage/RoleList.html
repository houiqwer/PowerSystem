<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>智慧停送电管理平台</title>
    <link rel="stylesheet" href="/css/layui.css">
    <link rel="stylesheet" href="/css/iconfont.css">
    <link rel="stylesheet" href="/css/safemain.css">

</head>

<body class="layui-layout-body safe">

    <!-- 内容主体区域 -->
    <div style="height: 100%;padding:68px 16px 20px;box-sizing: border-box">
        <h1 class="safeh1 cbl2"><blockquote class="layui-elem-quote" id="head"></blockquote></h1>
        <div class="layui-card safe-card1">
            <div class="" style="height: 100%">
                <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">

                    <div class="layui-tab-content layui-card-body">
                        <div class="layui-tab-item layui-show">

                            <!--表格区-->
                            <table lay-filter="demo" id="demo" class="demo"></table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="/Scripts/jquery-3.3.1.min.js"></script>
    <script src="/Scripts/layui.js"></script>
    <script src="/Scripts/layer/layer.js"></script>
    <script src="/Scripts/Common.js"></script>
    <script src="/Scripts/safe.js"></script>
    <script type="text/html" id="barDemo">
        <a class="layui-btn layui-btn-xs safe-btn3 kan" width="100" lay-event="deploy">菜单配置</a>
    </script>
    <script>
        //JavaScript代码区域
        layui.use('element', function () {
            var element = layui.element;
        });
        //表单启用
        layui.use('form', function () {
            var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
        })

        $(function () {
            dopage();
        })

       
        function dopage() {
            layui.use('table', function () {
                var table = layui.table;
                var ssq = $(".search").val() == undefined ? 0 : $(".search").height();
                var hei = $('.safe-card1').height() - 51 - ssq;
                table.render({
                    elem: '#demo',
                    url: '/Base/RoleList',
                    page: true,
                    cellMinWidth: 80, //全局定义常规单元格的最小宽度，layui 2.2.1 新增
                    headers: { "Authorization": localStorage.getItem("Token") },
                    
                    cols: [[
                         //{ type: 'radio', fixed: 'left' },
                        { field: 'EnumName', align: 'center', title: '角色名称' },
                     
                     { fixed: 'right', align: 'center', toolbar: '#barDemo', title: '操作' }
                    ]]
                });
                $(".layui-table-view").height(hei);
            });

        }
        layui.use('table', function () {
            var table = layui.table;
            //监听工具条
            table.on('tool(demo)', function (obj) {
                var data = obj.data;
                if (obj.event === 'deploy') {
                    window.location.href = 'RoleMenu.html?id=' + data.EnumValue;
                } 
            });

            $('.demoTable .layui-btn').on('click', function () {
                var type = $(this).data('type');
                active[type] ? active[type].call(this) : '';
            });
        });

       
        
    </script>
</body>
</html>
